<div class="emoji-picker">
	<cdk-virtual-scroll-viewport
		class="ch-vscroll-viewport"
		[ngClass]="{ 'ch-scroll-hidden': !scrollbarVisible }"
		[style.height]="'100%'"
		[itemSize]="itemSize"
		[minBufferPx]="300"
		[maxBufferPx]="600"
		(scrolledIndexChange)="handleScrolledIndexChanged($event)"
	>
		<div
			class="static-category sticky row"
			[style.display]="scrollIndex === 0 ? 'none' : 'block'"
		>
			<div class="ch-emoji-group-title">
				{{ currentCategory ?? '' }}
			</div>
		</div>

		<div
			*cdkVirtualFor="
				let row of rows;
				let index = index;
				templateCacheSize: 20;
				trackBy: trackEmojiRow
			"
			class="row"
			[ngClass]="{
				sticky: row.type === 'category',
				'virtual-category': row.type === 'category'
			}"
		>
			<ng-container *ngIf="row.type === 'category'">
				<div class="ch-emoji-group-title">
					{{ row.value }}
				</div>
			</ng-container>

			<ng-container *ngIf="row.type === 'emoji'">
				<ng-container
					*ngFor="let emoji of row.value; trackBy: trackEmoji"
				>
					<button class="emoji-btn">
						{{ emoji.value }}
					</button>
				</ng-container>
			</ng-container>
		</div>
	</cdk-virtual-scroll-viewport>
</div>
